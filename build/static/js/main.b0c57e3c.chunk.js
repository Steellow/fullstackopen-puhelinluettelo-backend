(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(15),o=t.n(c),a=t(6),u=t(3),i=t(0),l=function(e){var n=e.value,t=e.onChange;return Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})})},s=function(e){var n=e.onSubmit,t=e.nameValue,r=e.onNameChange,c=e.numberValue,o=e.onNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:c,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return Object(i.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(i.jsxs)("li",{children:[e.name," ",e.number," ",Object(i.jsx)("button",{onClick:function(){return r(e.id)},children:"Delete"})]},e.name)}))})},d=function(e){var n=e.message,t=e.color;return null===n?null:Object(i.jsx)("div",{className:"notification",style:{color:t},children:n})},b=t(4),f=t.n(b),h="/api/persons",m={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){console.log("Deleting "+e),f.a.delete(h+"/"+e)},replace:function(e){return f.a.put(h+"/"+e.id,e).then((function(e){return e.data}))}},O=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),b=Object(u.a)(o,2),f=b[0],h=b[1],O=Object(r.useState)(""),v=Object(u.a)(O,2),g=v[0],p=v[1],x=Object(r.useState)(""),w=Object(u.a)(x,2),C=w[0],S=w[1],y=Object(r.useState)(null),D=Object(u.a)(y,2),N=D[0],k=D[1],A=Object(r.useState)("green"),P=Object(u.a)(A,2),V=P[0],E=P[1];Object(r.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]);var I=function(e,n){k(e),E(n)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(d,{message:N,color:V}),Object(i.jsx)(l,{value:C,onChange:function(e){S(e.target.value)}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(s,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===f}))){if(window.confirm("Person is already added to the phonebook, do you want to replace the old number with a new one?")){var n=t.find((function(e){return e.name===f})),r=Object(a.a)(Object(a.a)({},n),{},{number:g});m.replace(r).then((function(e){c(t.map((function(t){return t===n?e:t}))),I("Modified ".concat(f),"green"),h(""),p("")})).catch((function(e){I("Information of ".concat(f," has already been removed from server"),"red"),c(t.filter((function(e){return e.name!==f})))}))}}else{var o={name:f,number:g};m.create(o).then((function(e){c(t.concat(e)),I("Added ".concat(f),"green"),h(""),p("")}))}},nameValue:f,onNameChange:function(e){h(e.target.value)},numberValue:g,onNumberChange:function(e){p(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(j,{persons:t,filter:C,handleDelete:function(e){window.confirm("Are you sure?")&&(m.deletePerson(e),I("Deleted ".concat(t.find((function(n){return e===n.id})).name),"green"),c(t.filter((function(n){return n.id!==e}))))}})]})};t(39);o.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b0c57e3c.chunk.js.map